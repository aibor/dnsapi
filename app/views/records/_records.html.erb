<% no_links ||= false -%>
<% count    ||= 25 -%>
<% page     ||= 1 -%>
<table class="table table-striped table-condensed">
  <thead>
    <tr>

      <th>
        <%= t('records.columns.name') %>
      </th>

      <th>
        TTL
      </th>

      <th>
        <%= t('records.columns.type') %>
      </th>

      <th>
        <%= t('records.columns.prio') %>
      </th>

      <th>
        <%= t('records.columns.content') %>
      </th>

      <% unless records.map {|r| r.domain.cryptokeys}.flatten.empty? -%>
        <th>
          <%= t('records.columns.ordername') %>
        </th>
      <% end -%>

      <th>
        <%= t('records.columns.auth') %>
      </th>

      <% if false %> 
        <th>
          <%= t('records.columns.modified') %>
        </th>
      <% end %>

      <% unless no_links -%>
        <th colspan="2"></th>
      <% end -%>

    </tr>
  </thead>

  <tbody>
    <% records.first(page * count).last(count).each do |record| %>
      <tr>

        <td>
          <%= link_to (record.name or ''), record, title: t('.show') %>
        </td>

        <td>
          <%= sane_ttl record.ttl %>
        </td>

        <td>
          <%= record.type %>
        </td>

        <td>
          <%= record.prio if record.prio.to_i > 0 %>
        </td>

        <td>
          <%= record.type == 'SOA' ? soa_times(record.content) : record.content %>
        </td>

        <% unless record.domain.cryptokeys.empty? -%>
          <td>
            <%= record.ordername %>
          </td>
        <% end -%>

        <td>
          <span class="glyphicon glyphicon-<%= record.auth ? 'ok' : 'remove' %>">
          </span>
        </td>

        <% if false %> 
          <td>
            <%= l record.change_date, format: :short if record.change_date %>
          </td>
        <% end %> 

        <% unless no_links -%>

          <td>
            <%= link_to edit_record_path(record), title: t('.edit') do %>
              <span class="glyphicon glyphicon-edit"></span>
            <% end %>
          </td>

          <td>
            <%= link_to delete_record_path(record), title: t('.delete') do %>
              <span class="glyphicon glyphicon-remove"></span>
            <% end %>
          </td>

        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>

<% if records.count > count -%>
  <div class="text-center">
    <ul class="pagination">

      <li class="<%= 'disabled' if page == 1 %>">
      <%= link_to raw('&laquo'), records_page: (page > 2) ? (page - 1) : nil %>
      </li>

      <% (records.count / count).times do |p| -%>
        <li class="<%= 'active' if page == p + 1 %>">
        <%= link_to p + 1, records_page: (p > 0) ? (p + 1) : nil %>
        </li>
      <% end -%>

      <li class="<%= 'disabled' if page >= records.count / count %>">
      <%= link_to raw('&raquo'), records_page: (page + 1) %>
      </li>

    </ul>
  </div>
<% end -%>
